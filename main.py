2025-05-21T10:41:57.238154832Z Collecting pydantic-core==2.14.6 (from pydantic<2.6,>=2.4.1->aiogram==3.2.0->-r requirements.txt (line 1))
2025-05-21T10:41:57.250093702Z   Downloading pydantic_core-2.14.6-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.5 kB)
2025-05-21T10:41:57.302739563Z Collecting idna>=2.0 (from yarl<2.0,>=1.0->aiohttp==3.9.3->-r requirements.txt (line 2))
2025-05-21T10:41:57.31406741Z   Downloading idna-3.10-py3-none-any.whl.metadata (10 kB)
2025-05-21T10:41:57.402310417Z Collecting propcache>=0.2.1 (from yarl<2.0,>=1.0->aiohttp==3.9.3->-r requirements.txt (line 2))
2025-05-21T10:41:57.412909637Z   Downloading propcache-0.3.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (10 kB)
2025-05-21T10:41:57.44352268Z Downloading aiogram-3.2.0-py3-none-any.whl (470 kB)
2025-05-21T10:41:57.466820007Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 470.1/470.1 kB 21.9 MB/s eta 0:00:00
2025-05-21T10:41:57.478019411Z Downloading aiohttp-3.9.3-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.3 MB)
2025-05-21T10:41:57.499336473Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.3/1.3 MB 67.8 MB/s eta 0:00:00
2025-05-21T10:41:57.509880082Z Downloading pytz-2025.2-py2.py3-none-any.whl (509 kB)
2025-05-21T10:41:57.520020141Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 509.2/509.2 kB 63.0 MB/s eta 0:00:00
2025-05-21T10:41:57.530843486Z Downloading python_dotenv-1.1.0-py3-none-any.whl (20 kB)
2025-05-21T10:41:57.547000352Z Downloading aiofiles-23.2.1-py3-none-any.whl (15 kB)
2025-05-21T10:41:57.563130517Z Downloading aiosignal-1.3.2-py2.py3-none-any.whl (7.6 kB)
2025-05-21T10:41:57.57917972Z Downloading attrs-25.3.0-py3-none-any.whl (63 kB)
2025-05-21T10:41:57.586626579Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 63.8/63.8 kB 10.6 MB/s eta 0:00:00
2025-05-21T10:41:57.597511855Z Downloading certifi-2025.4.26-py3-none-any.whl (159 kB)
2025-05-21T10:41:57.606379316Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 159.6/159.6 kB 23.0 MB/s eta 0:00:00
2025-05-21T10:41:57.617829865Z Downloading frozenlist-1.6.0-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (313 kB)
2025-05-21T10:41:57.628863545Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 313.6/313.6 kB 36.8 MB/s eta 0:00:00
2025-05-21T10:41:57.641626124Z Downloading magic_filter-1.0.12-py3-none-any.whl (11 kB)
2025-05-21T10:41:57.671822707Z Downloading multidict-6.4.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (223 kB)
2025-05-21T10:41:57.680945174Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 223.7/223.7 kB 33.1 MB/s eta 0:00:00
2025-05-21T10:41:57.694411189Z Downloading pydantic-2.5.3-py3-none-any.whl (381 kB)
2025-05-21T10:41:57.709203283Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 381.9/381.9 kB 31.1 MB/s eta 0:00:00
2025-05-21T10:41:57.721252766Z Downloading pydantic_core-2.14.6-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
2025-05-21T10:41:57.746931568Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 89.3 MB/s eta 0:00:00
2025-05-21T10:41:57.75810361Z Downloading typing_extensions-4.13.2-py3-none-any.whl (45 kB)
2025-05-21T10:41:57.765356245Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 45.8/45.8 kB 7.2 MB/s eta 0:00:00
2025-05-21T10:41:57.776754143Z Downloading yarl-1.20.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (358 kB)
2025-05-21T10:41:57.790916473Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 358.1/358.1 kB 30.1 MB/s eta 0:00:00
2025-05-21T10:41:57.80268463Z Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
2025-05-21T10:41:57.81773766Z Downloading idna-3.10-py3-none-any.whl (70 kB)
2025-05-21T10:41:57.824768949Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 70.4/70.4 kB 12.2 MB/s eta 0:00:00
2025-05-21T10:41:57.835950652Z Downloading propcache-0.3.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (232 kB)
2025-05-21T10:41:57.843953584Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.5/232.5 kB 36.0 MB/s eta 0:00:00
2025-05-21T10:41:57.994650484Z Installing collected packages: pytz, typing-extensions, python-dotenv, propcache, multidict, magic-filter, idna, frozenlist, certifi, attrs, annotated-types, aiofiles, yarl, pydantic-core, aiosignal, pydantic, aiohttp, aiogram
2025-05-21T10:41:59.330782608Z Successfully installed aiofiles-23.2.1 aiogram-3.2.0 aiohttp-3.9.3 aiosignal-1.3.2 annotated-types-0.7.0 attrs-25.3.0 certifi-2025.4.26 frozenlist-1.6.0 idna-3.10 magic-filter-1.0.12 multidict-6.4.4 propcache-0.3.1 pydantic-2.5.3 pydantic-core-2.14.6 python-dotenv-1.1.0 pytz-2025.2 typing-extensions-4.13.2 yarl-1.20.0
2025-05-21T10:41:59.49081079Z 
2025-05-21T10:41:59.49083342Z [notice] A new release of pip is available: 24.0 -> 25.1.1
2025-05-21T10:41:59.49083707Z [notice] To update, run: pip install --upgrade pip
2025-05-21T10:42:10.429862143Z ==> Uploading build...
2025-05-21T10:42:15.548129143Z ==> Uploaded in 3.9s. Compression took 1.2s
2025-05-21T10:42:15.577750044Z ==> Build successful 🎉
2025-05-21T10:42:24.684234274Z ==> Deploying...
2025-05-21T10:42:39.029898792Z ==> Running 'python main.py'
2025-05-21T10:42:55.974710238Z 2025-05-21 10:42:55,974 - INFO - aiohttp.access - 127.0.0.1 [21/May/2025:10:42:55 +0000] "HEAD / HTTP/1.1" 404 159 "-" "Go-http-client/1.1"
2025-05-21T10:43:05.315820621Z ==> Your service is live 🎉
2025-05-21T10:43:06.083711387Z 2025-05-21 10:43:06,083 - INFO - aiohttp.access - 127.0.0.1 [21/May/2025:10:43:06 +0000] "GET / HTTP/1.1" 404 173 "-" "Go-http-client/2.0"
2025-05-21T10:48:03.651374465Z ==> Detected service running on port 10000
2025-05-21T10:48:03.74489204Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-05-21T10:50:31.484121901Z 2025-05-21 10:50:31,483 - INFO - aiohttp.access - 127.0.0.1 [21/May/2025:10:50:31 +0000] "POST /webhook/8006649444 HTTP/1.1" 200 159 "-" "-"
2025-05-21T10:50:32.686737426Z 2025-05-21 10:50:32,686 - INFO - aiogram.event - Update id=653898990 is handled. Duration 1202 ms by bot id=8006649444
2025-05-21T10:50:33.999319694Z 2025-05-21 10:50:33,999 - INFO - aiohttp.access - 127.0.0.1 [21/May/2025:10:50:33 +0000] "POST /webhook/8006649444 HTTP/1.1" 200 159 "-" "-"
2025-05-21T10:50:34.400629958Z 2025-05-21 10:50:34,400 - INFO - aiogram.event - Update id=653898991 is handled. Duration 400 ms by bot id=8006649444
2025-05-21T10:50:37.896555311Z 2025-05-21 10:50:37,896 - INFO - aiohttp.access - 127.0.0.1 [21/May/2025:10:50:37 +0000] "POST /webhook/8006649444 HTTP/1.1" 200 159 "-" "-"
2025-05-21T10:50:37.897275075Z 2025-05-21 10:50:37,897 - INFO - __main__ - [coin_input] got message: btc from 696165311
2025-05-21T10:50:37.897291705Z 2025-05-21 10:50:37,897 - INFO - __main__ - [coin_input] loading coin list from CoinGecko
2025-05-21T10:50:38.053226318Z 2025-05-21 10:50:38,053 - INFO - aiogram.event - Update id=653898992 is not handled. Duration 156 ms by bot id=8006649444
2025-05-21T10:50:38.063074773Z 2025-05-21 10:50:38,053 - ERROR - asyncio - Task exception was never retrieved
2025-05-21T10:50:38.063096343Z future: <Task finished name='Task-237' coro=<BaseRequestHandler._background_feed_update() done, defined at /opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/webhook/aiohttp_server.py:137> exception=TypeError("string indices must be integers, not 'str'")>
2025-05-21T10:50:38.063105594Z Traceback (most recent call last):
2025-05-21T10:50:38.063110344Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/webhook/aiohttp_server.py", line 138, in _background_feed_update
2025-05-21T10:50:38.063114404Z     result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
2025-05-21T10:50:38.063118114Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063121794Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/dispatcher.py", line 189, in feed_raw_update
2025-05-21T10:50:38.063125844Z     return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
2025-05-21T10:50:38.063129474Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063133824Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/dispatcher.py", line 158, in feed_update
2025-05-21T10:50:38.063137964Z     response = await self.update.wrap_outer_middleware(
2025-05-21T10:50:38.063142624Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063147095Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/middlewares/error.py", line 25, in __call__
2025-05-21T10:50:38.063151404Z     return await handler(event, data)
2025-05-21T10:50:38.063155855Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063160185Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 27, in __call__
2025-05-21T10:50:38.063164185Z     return await handler(event, data)
2025-05-21T10:50:38.063168745Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063172525Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/fsm/middleware.py", line 41, in __call__
2025-05-21T10:50:38.063191195Z     return await handler(event, data)
2025-05-21T10:50:38.063193775Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063196065Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
2025-05-21T10:50:38.063198276Z     return await wrapped_inner(event, kwargs)
2025-05-21T10:50:38.063200345Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063202505Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
2025-05-21T10:50:38.063205356Z     return await wrapped()
2025-05-21T10:50:38.063207446Z            ^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063209576Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/dispatcher.py", line 276, in _listen_update
2025-05-21T10:50:38.063212136Z     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
2025-05-21T10:50:38.063214396Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063216526Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/router.py", line 116, in propagate_event
2025-05-21T10:50:38.063218616Z     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
2025-05-21T10:50:38.063220686Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063222926Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/router.py", line 111, in _wrapped
2025-05-21T10:50:38.063225146Z     return await self._propagate_event(
2025-05-21T10:50:38.063227186Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063229386Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/router.py", line 144, in _propagate_event
2025-05-21T10:50:38.063231886Z     response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
2025-05-21T10:50:38.063235336Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063238256Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/router.py", line 116, in propagate_event
2025-05-21T10:50:38.063240646Z     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
2025-05-21T10:50:38.063243496Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063246126Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/router.py", line 111, in _wrapped
2025-05-21T10:50:38.063248646Z     return await self._propagate_event(
2025-05-21T10:50:38.063251106Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063253837Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/router.py", line 136, in _propagate_event
2025-05-21T10:50:38.063256317Z     response = await observer.trigger(event, **kwargs)
2025-05-21T10:50:38.063258827Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063265287Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/event/telegram.py", line 121, in trigger
2025-05-21T10:50:38.063267757Z     return await wrapped_inner(event, kwargs)
2025-05-21T10:50:38.063269887Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063272027Z   File "/opt/render/project/src/.venv/lib/python3.11/site-packages/aiogram/dispatcher/event/handler.py", line 43, in call
2025-05-21T10:50:38.063279627Z     return await wrapped()
2025-05-21T10:50:38.063281907Z            ^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063284137Z   File "/opt/render/project/src/main.py", line 128, in handle_coin_input
2025-05-21T10:50:38.063286247Z     matched_coin = next((c for c in coin_list_cache if coin_input == c['id'] or coin_input == c['symbol'].lower()), None)
2025-05-21T10:50:38.063288487Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-05-21T10:50:38.063290627Z   File "/opt/render/project/src/main.py", line 128, in <genexpr>
2025-05-21T10:50:38.063293027Z     matched_coin = next((c for c in coin_list_cache if coin_input == c['id'] or coin_input == c['symbol'].lower()), None)
2025-05-21T10:50:38.063295147Z                                                                      ~^^^^^^
2025-05-21T10:50:38.063297407Z TypeError: string indices must be integers, not 'str'
